<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>AI Lipid Droplet Analyzer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <div>
        <h1>AI Lipid Droplet Analyzer</h1>
        <p class="subtitle">
          Web-based tool untuk estimasi persentase lipid droplet dari wet mount hepatopankreas udang.
        </p>
      </div>
      <div class="stats-card">
        <div class="stat-item">
          <span class="stat-label">Total gambar terlatih</span>
          <span class="stat-value" id="total-trained">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Sampel training tersimpan</span>
          <span class="stat-value" id="total-samples">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Update terakhir</span>
          <span class="stat-value" id="last-updated">-</span>
        </div>
      </div>
    </header>

    <nav class="tab-nav">
      <button class="tab-button active" data-tab="training-tab">Training</button>
      <button class="tab-button" data-tab="analysis-tab">Analisa</button>
    </nav>

    <main class="tab-container">
      <!-- TRAINING TAB -->
      <section id="training-tab" class="tab-content active">
        <div class="panel">
          <h2>Training Model</h2>
          <p class="panel-description">
            Upload beberapa gambar wet mount hepatopankreas udang, lalu masukkan
            persentase lipid droplet untuk setiap gambar sebagai data ground truth.
            Sistem akan melatih model regresi sederhana berbasis fitur visual.
          </p>

          <div class="upload-section">
            <label class="file-label">
              <span>Pilih gambar training (bisa beberapa sekaligus)</span>
              <input type="file" id="train-images" accept="image/*" multiple />
            </label>
          </div>

          <div id="train-preview-container" class="image-grid"></div>

          <div class="actions-row">
            <button id="clear-train-preview" class="btn secondary">
              Bersihkan daftar
            </button>
            <button id="start-training" class="btn primary">
              Latih Model
            </button>
          </div>

          <div id="train-status" class="status-message"></div>
        </div>
      </section>

      <!-- ANALYSIS TAB -->
      <section id="analysis-tab" class="tab-content">
        <div class="panel">
          <h2>Analisa Gambar</h2>
          <p class="panel-description">
            Upload satu atau beberapa gambar hepatopankreas udang. Sistem akan
            menggunakan model yang sudah dilatih untuk mengestimasi persentase
            lipid droplet (% area).
          </p>

          <div class="upload-section">
            <label class="file-label">
              <span>Pilih gambar untuk analisa</span>
              <input type="file" id="analysis-images" accept="image/*" multiple />
            </label>
          </div>

          <div class="actions-row">
            <button id="run-analysis" class="btn primary">
              Jalankan Analisa
            </button>
          </div>

          <div id="analysis-warning" class="warning-message hidden">
            Belum ada model yang terlatih. Silakan lakukan training terlebih dahulu.
          </div>

          <div id="analysis-results" class="image-grid"></div>
        </div>
      </section>
    </main>
  </div>

  <!-- Kanvas tersembunyi untuk ekstraksi fitur -->
  <canvas id="feature-canvas" class="hidden"></canvas>

  <script src="script.js"></script>
</body>
</html>
